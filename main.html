<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang SC', sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #ffffff 100%);
            min-height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .blessing-container {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        .blessing-text {
            position: absolute;
            background: #e19bff;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 14px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e19bff;
            width: 140px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            word-wrap: break-word;
            overflow: hidden;
            z-index: 10;
            opacity: 0;
            transform: scale(0);
        }

        .blessing-text:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background: #e19bff;
            z-index: 100;
        }

        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .music-control:hover {
            background: rgb(255, 255, 255);
            transform: scale(1.1);
        }

        .music-icon {
            font-size: 24px;
            color: #764ba2;
        }

        .music-control.muted .music-icon::before {
            content: "üîá";
        }

        .music-control:not(.muted) .music-icon::before {
            content: "üîä";
        }

        .play-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            font-size: 24px;
            flex-direction: column;
            text-align: center;
        }

        .play-button {
            background: #FFB6C1;
            color: #333;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .play-button:hover {
            background: #ffa7b4;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="blessing-container" id="container"></div>
    
    <!-- Èü≥‰πêÊéßÂà∂ÊåâÈíÆ -->
    <div class="music-control" id="musicControl">
        <div class="music-icon"></div>
    </div>
    
    <!-- ËÉåÊôØÈü≥‰πê -->
    <audio id="backgroundMusic" loop>
        
        <source src="ËâæÊØîÂà© - ‰∏Ä‰∏™‰∫∫ÊÉ≥ÁùÄ‰∏Ä‰∏™‰∫∫(ËØ¥Âî±Áâà).mp3" type="audio/mpeg">
        ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÈü≥È¢ëÂÖÉÁ¥†
    </audio>
    
    <!-- Êí≠ÊîæË¶ÜÁõñÂ±Ç -->
    <div class="play-overlay" id="playOverlay">
        <p>ËØ∑Êü•Êî∂Á§ºÁâ©</p>
        <button class="play-button" id="playButton">ÊâìÂºÄÁ§ºÁâ©</button>
    </div>
    
    <script>
        // Á•ùÁ¶èËØ≠Êï∞ÁªÑ
        const blessings = [
            "Â•ΩÂ•ΩÁà±Ëá™Â∑±", "ËÆ∞ÂæóÂêÉÊ∞¥Êûú", "‰øùÊåÅÂ•ΩÂøÉÊÉÖ", "‰ªäÂ§©ËøáÂæóÂºÄÂøÉ",
            "Êó©ÁÇπ‰ºëÊÅØ", "Âà´ÁÜ¨Â§ú", "È°∫È°∫Âà©Âà©", "Ê¢¶ÊÉ≥ÊàêÁúü",
            "ÊàëÊÉ≥‰Ω†‰∫Ü", "ÊúüÂæÖ‰∏ã‰∏ÄÊ¨°ËßÅÈù¢", "ÊØèÂ§©ÈÉΩË¶ÅÂÖÉÊ∞îÊª°Êª°", "Â•ΩÂ•ΩÂêÉÈ•≠",
            "Ê≥®ÊÑè‰øùÊöñ", "ÁéãËÄÖÊ±ÇË∫∫", "ÂêÉÈ∏°ÊúâÈ∫¶Âà´Ë∏¢", "Êó†ÁïèÂ•ëÁ∫¶Êù•roll",
            "Áéã‰Ω≥Áê™ËÑëÂ≠êÊúâÁóÖ", "ÂÖâÈÅáË∑ëÂõæ", "ÈáëÈì≤Èì≤ÂºÄÈì≤", "ÁåõÂÖΩÊ¥æÂØπÈíìÈ±º"
        ];

        class HeartBlessing {
            constructor() {
                this.container = document.getElementById('container');
                this.blessingElements = [];
                this.isAnimating = false;
                this.animationId = null;
                this.blessingCount = 0;
                this.currentIndex = 0;
                this.windowCount = 64; // Á™óÂè£Êï∞Èáè
                
                // Èü≥‰πêÁõ∏ÂÖ≥
                this.backgroundMusic = document.getElementById('backgroundMusic');
                this.musicControl = document.getElementById('musicControl');
                this.playOverlay = document.getElementById('playOverlay');
                this.playButton = document.getElementById('playButton');
                this.isMusicPlaying = false;
                
                this.init();
            }
            
            init() {
                // ËÆæÁΩÆÈü≥‰πêÊéßÂà∂
                this.setupMusicControl();
                
                // Â∞ùËØïËá™Âä®Êí≠ÊîæÈü≥‰πê
                this.attemptAutoPlay();
            }
            
            setupMusicControl() {
                // ÁÇπÂáªÈü≥‰πêÊéßÂà∂ÊåâÈíÆ
                this.musicControl.addEventListener('click', () => {
                    this.toggleMusic();
                });
                
                // ÁÇπÂáªÊí≠ÊîæÊåâÈíÆ
                this.playButton.addEventListener('click', () => {
                    this.startMusic();
                    this.playOverlay.style.display = 'none';
                    this.startBlessings();
                });
            }
            
            attemptAutoPlay() {
                // Â∞ùËØïËá™Âä®Êí≠ÊîæÈü≥‰πê
                const playPromise = this.backgroundMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // Ëá™Âä®Êí≠ÊîæÊàêÂäü
                        this.isMusicPlaying = true;
                        this.musicControl.classList.remove('muted');
                        this.playOverlay.style.display = 'none';
                        this.startBlessings();
                    }).catch(error => {
                        // Ëá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢ÔºåÊòæÁ§∫Êí≠ÊîæË¶ÜÁõñÂ±Ç
                        console.log("Ëá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢ÔºåÈúÄË¶ÅÁî®Êà∑‰∫§‰∫í");
                        this.playOverlay.style.display = 'flex';
                    });
                }
            }
            
            startMusic() {
                this.backgroundMusic.play().then(() => {
                    this.isMusicPlaying = true;
                    this.musicControl.classList.remove('muted');
                }).catch(error => {
                    console.log("Êí≠ÊîæÂ§±Ë¥•:", error);
                });
            }
            
            toggleMusic() {
                if (this.isMusicPlaying) {
                    this.backgroundMusic.pause();
                    this.musicControl.classList.add('muted');
                } else {
                    this.backgroundMusic.play().catch(e => {
                        console.log("Êí≠ÊîæÂ§±Ë¥•:", e);
                    });
                    this.musicControl.classList.remove('muted');
                }
                this.isMusicPlaying = !this.isMusicPlaying;
            }
            
            startBlessings() {
                // ÂºÄÂßãÂàõÂª∫Áà±ÂøÉÁ™óÂè£
                setTimeout(() => this.start(), 100);
            }
            
            generateHeartPoints(count) {
                const points = [];
                const screenWidth = window.innerWidth;
                const screenHeight = window.innerHeight;
                
                // Áº©ÊîæÊØî‰æã - Âç†Â±èÂπï65%
                const scaleX = (screenWidth * 0.65) / 35;
                const scaleY = (screenHeight * 0.65) / 25;
                
                // ËÆ°ÁÆó‰∏≠ÂøÉÁÇπ
                const centerX = screenWidth / 2;
                const centerY = screenHeight / 2;
                
                for (let i = 0; i < count; i++) {
                    const t = 2 * Math.PI * i / count;
                    
                    // ÂøÉÂΩ¢ÊñπÁ®ã
                    const x = 16 * Math.pow(Math.sin(t), 3);
                    const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                    
                    const screenX = x * scaleX + centerX;
                    const screenY = -y * scaleY + centerY;
                    
                    points.push({ x: screenX, y: screenY });
                }
                return points;
            }
            
            createBlessingElement(blessing, x, y) {
                const element = document.createElement('div');
                element.className = 'blessing-text';
                element.textContent = blessing;
                
                // ËÆ°ÁÆó‰ΩçÁΩÆÔºå‰ΩøÂÖÉÁ¥†‰∏≠ÂøÉÂØπÂáÜÂùêÊ†áÁÇπ
                const elementWidth = 140;
                const elementHeight = 70;
                
                element.style.left = `${x - elementWidth/2}px`;
                element.style.top = `${y - elementHeight/2}px`;
                
                // Ê∑ªÂä†ÂÖ≥Èó≠ÂäüËÉΩ
                element.addEventListener('click', () => {
                    element.style.transform = 'scale(0)';
                    element.style.opacity = '0';
                    setTimeout(() => {
                        element.remove();
                        this.blessingElements = this.blessingElements.filter(el => el !== element);
                    }, 300);
                });
                
                this.container.appendChild(element);
                
                // Ê∑ªÂä†Âá∫Áé∞Âä®Áîª
                setTimeout(() => {
                    element.style.transform = 'scale(1)';
                    element.style.opacity = '0.9';
                }, 10);
                
                return element;
            }
            
            start() {
                if (this.isAnimating) return;
                
                this.isAnimating = true;
                this.currentIndex = 0;
                const points = this.generateHeartPoints(this.windowCount);
                
                const addBlessing = () => {
                    if (!this.isAnimating || this.currentIndex >= points.length) {
                        this.stop();
                        return;
                    }
                    
                    const point = points[this.currentIndex];
                    const blessing = blessings[Math.floor(Math.random() * blessings.length)];
                    const element = this.createBlessingElement(blessing, point.x, point.y);
                    
                    this.blessingElements.push(element);
                    this.blessingCount++;
                    
                    this.currentIndex++;
                    
                    // ÂàõÂª∫ÈÄüÂ∫¶
                    setTimeout(() => {
                        if (this.isAnimating) {
                            this.animationId = requestAnimationFrame(addBlessing);
                        }
                    }, 200);
                };
                
                this.animationId = requestAnimationFrame(addBlessing);
            }
            
            stop() {
                this.isAnimating = false;
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
            }
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁ´ãÂç≥ÂàùÂßãÂåñ
        window.addEventListener('load', () => {
            new HeartBlessing();
        });
    </script>
</body>
</html>